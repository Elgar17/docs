(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{403:function(t,s,a){"use strict";a.r(s);var n=a(42),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#包"}},[t._v("#")]),t._v(" 包")]),t._v(" "),a("h2",{attrs:{id:"_1-概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-概述"}},[t._v("#")]),t._v(" 1. 概述")]),t._v(" "),a("p",[t._v("一个项目包含多个文件，把不同的功能放到不同的文件中，这样可提高项目的可阅读性，方便维护，下面介绍如何包的引入和导出。")]),t._v(" "),a("p",[t._v("之前使用 "),a("code",[t._v("fmt")]),t._v(" 就是一个外部的文件，也就是 GO 语言中叫包，包其实就是一个文件夹。")]),t._v(" "),a("p",[t._v("每个包都有一个名字，通常写在第一行，"),a("code",[t._v("package")]),t._v(" 关键字跟上包名。")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" main\n")])])]),a("p",[t._v("上面是定义了一个包叫 "),a("code",[t._v("main")]),t._v("。")]),t._v(" "),a("h2",{attrs:{id:"_2-导出"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-导出"}},[t._v("#")]),t._v(" 2. 导出")]),t._v(" "),a("p",[t._v("通常项目中包含一个 utils 的包（文件夹），里面存放 utils.go 的文件，专门定义一些工具函数。")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// util.go 文件")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" utils\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 函数名首字母大写")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" x1 "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" x "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" x1\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("为了让其他的包使用，函数名首字母大写，内部使用的函数用小写。")]),t._v(" "),a("h2",{attrs:{id:"_3-引入"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-引入"}},[t._v("#")]),t._v(" 3. 引入")]),t._v(" "),a("p",[t._v("使用 "),a("code",[t._v("import")]),t._v(" 关键字加包的路径，可以引入一个包。")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fmt"')]),t._v("\n")])])]),a("p",[t._v("这是一个包的引入，引入多个包使用括号。")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fmt"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"net"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("默认的根路径是 "),a("code",[t._v("src")]),t._v(" 目录，也就是 $GOPATH 里的 src 目录，需要从这个目录开始引入。")]),t._v(" "),a("p",[t._v("已知 "),a("code",[t._v("src/oa")]),t._v(" 目录下有一个项目，有一个 "),a("code",[t._v("utils")]),t._v(" 包存放在 "),a("code",[t._v("src/oa/utils/util.go")]),t._v(" 目录下。")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// src/oa/main.go")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" main\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fmt"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"oa/utils"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    fmt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("utils"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("这是 "),a("code",[t._v("oa/main.go")]),t._v(" 文件中使用了 "),a("code",[t._v("utils")]),t._v(" 包中的 "),a("code",[t._v("Add")]),t._v(" 函数，使用包名 "),a("code",[t._v(".")]),t._v(" 函数名。")]),t._v(" "),a("p",[t._v("注意，包对应的文件夹的名与包名（package）必须一致。")]),t._v(" "),a("h2",{attrs:{id:"_4-别名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-别名"}},[t._v("#")]),t._v(" 4. 别名")]),t._v(" "),a("p",[t._v("如果包名太长，可以为包取别名。")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fmt"')]),t._v("\n    util "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"oa/utils"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 给包重命名")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("包只导入不使用")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("_")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"surpass/dolphin"')]),t._v("\n")])])]),a("p",[t._v('上面例子是给 "oa/utils" 包取了 util 的别名，之后以 '),a("code",[t._v("util.Add(1,2)")]),t._v(" 来使用。")]),t._v(" "),a("h2",{attrs:{id:"_5-go-modules"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-go-modules"}},[t._v("#")]),t._v(" 5. go modules")]),t._v(" "),a("p",[t._v("Go 语言没有统一的包管理地址，比如像存放 node.js 包管理的 npm，所以大家都放在 github 上。")]),t._v(" "),a("p",[t._v("go module 是在 1.13 版本以后，Go 语言官方推荐的依赖管理解决方案。")]),t._v(" "),a("p",[t._v("module 是所有"),a("strong",[t._v("包的集合")]),t._v("，使用 "),a("code",[t._v("init")]),t._v(" 来初始化一个 module，这是在项目根目录下生成 "),a("code",[t._v("go.mod")]),t._v(" 文件。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 初始化一个库")]),t._v("\ngo init github.com/EE/Hello\n")])])]),a("p",[t._v("如果在一个项目中使用了多个包，那么这些信息存放在 "),a("code",[t._v("go.mod")]),t._v(" 文件，我们启动这个项目时，需要先下载这些包的集合，使用 "),a("code",[t._v("tidy")]),t._v(" 名下载，本项目所有的依赖包。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 下载项目的依赖")]),t._v("\ngo mod tidy\n")])])]),a("comment-comment")],1)}),[],!1,null,null,null);s.default=e.exports}}]);